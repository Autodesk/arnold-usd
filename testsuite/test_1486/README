Support custom material scopes

see #1486

author: sebastien.ortega

